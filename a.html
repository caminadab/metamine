<canvas id="teke-ning" width="900" height="500">
</canvas>
<script>
// jslib
tau = Math.PI * 2;
start = new Date().getTime() / 1000;

/*
local ja = true
local nee = false
local pack = pack or table.pack
local unpack = unpack or table.unpack
local _pow = function(a,b)
    if type(a) == 'number' then
        return a ^ b
    else
        return function(c)
            for i=1,b do
                c = a(c)
            end
            return c
        end
    end
end
local lijst = 'lijst'
local int = 'int'
local getal = 'getal'
local _istype = function(a,b)
    if b == getal then return type(a) == 'number' end
    if b == int then return type(a) == 'number' and a%1 == 0 end
    if b == lijst then return type(a) == 'table' end
    return false
end
*/
var _comp = function(a,b) {
    return function() {
        return b(a(arguments))
    };
};

function _I(a,i,...args) {
    if (Array.isArray(a))
        return a[i];
    else {
        //var args = [];
        //for (var i = 1; i < arguments.length; i++)
            //args.push( arguments[i] );
        //return a.apply(a, args);
        return a(i,...args);
    }
}

function vanaf(a,van) {
    return a.splice(van,a.length);
}

function tot(a,tot) {
    return a.splice(0,tot);
}

function deel(a,b) {
    return a.splice(b[0],b[1]);
}
/*
function tabel(t)
    var t = t || {}
    local mt = {}
    function mt:__call(i)
        return t[i+1]
    end
    setmetatable(t, mt)
    return t
end

local _kies = function(a,b)
    local fa = type(a) == 'function'
    local fb = type(b) == 'function'
    if a and b then return 'fout' end
    return a or b
end

local cat = function(a,b)
    local r = tabel{}
    for i,v in ipairs(a) do
        for i,v in ipairs(v) do
            r[#r+1] = v
        end
        if b and i ~= #a then
            for i,b in ipairs(b) do
                r[#r+1] = b
            end
        end
    end
    return r
end

local vind = function(a,b)
    for i=1,#a-#b+1 do
        local gevonden = true
        for j=i,i+#b-1 do
            if a[j] ~= b[j-i+1] then
                gevonden = false
                break
            end
        end
        if gevonden then
            return i-1
        end
    end
    return false
end

local tekst = function (a)
    local t = tostring(a)
    return {string.byte(t,1,#t)}
end

local herhaal = function(f)
    return function(a)
        local r = a
        while a do
            r = a
            a = f(a)
        end
        return r
    end
end
*/

var _procent = function(a) { return a / 100; }

var sin = Math.sin;
var cos = Math.cos;
var tan = Math.tan;
var int = Math.floor;
var abs = Math.abs;



// waarde
var canvas = document.getElementById('teke-ning');
var ctx = canvas.getContext('2d');

function stap() {
	ctx.clearRect(0, 0, canvas.width, canvas.height);
	var tekening = (function() {
    nu = new Date().getTime() / 1000;
looptijd = nu - start;
    var F = looptijd * 2;
    var E = _I(sin, F);
    var D = [E,0.5];
    var G = [0,0,0];
    var C = [D,0.2,G];
    var H = function (_A) {
        var J = _I(_A, 0);
        var K = _I(_A, 1);
        var L = _I(_A, 2);
        var I = [0,J,K,L];
        return I;
    }
    var B = _I(H, C);
    var O = [0,0];
    var Q = 16 / 9;
    var P = [Q,1];
    var S = _I(sin, looptijd);
    var R = [0,0,S];
    var N = [O,P,R];
    var T = function (_C) {
        var V = _I(_C, 0);
        var W = _I(_C, 1);
        var X = _I(_C, 2);
        var U = [1,V,W,X];
        return U;
    }
    var M = _I(T, N);
    var AD = _I(sin, looptijd);
    var AC = 0.5 * AD;
    var AB = 0.5 + AC;
    var AG = _I(cos, looptijd);
    var AF = 0.5 * AG;
    var AE = 0.5 + AF;
    var AA = [AB,AE];
    var AH = [1,1,0];
    var Z = [AA,0.2,AH];
    var AI = function (_A) {
        var AK = _I(_A, 0);
        var AL = _I(_A, 1);
        var AM = _I(_A, 2);
        var AJ = [0,AK,AL,AM];
        return AJ;
    }
    var Y = _I(AI, Z);
    var AR = looptijd * 2;
    var AQ = _I(sin, AR);
    var AP = [AQ,0.5];
    var AS = [0,0,0];
    var AO = [AP,0.2,AS];
    var AT = function (_A) {
        var AV = _I(_A, 0);
        var AW = _I(_A, 1);
        var AX = _I(_A, 2);
        var AU = [0,AV,AW,AX];
        return AU;
    }
    var AN = _I(AT, AO);
    var A = [B,M,Y,AN];

    return A;
})()
; //doe();
	for (var i = 0; i < tekening.length; i++) {
		var figuur = tekening[i];

		 // cirkel
		if (figuur[0] == 0) {
			var x = figuur[1][0] * 500;
			var y = figuur[1][1] * 500;
			var r = figuur[2] * 500;
			if (figuur[3]) {
				var R = figuur[3][0];
				var G = figuur[3][1];
				var B = figuur[3][2];
				ctx.fillStyle = 'rgb('+R*255+','+G*255+','+B*255+')'
			}
			ctx.beginPath();
			ctx.arc(x, y, r, 0, 2 * Math.PI);
			ctx.fill(); 
		}

		// vierkant
		if (figuur[0] == 1) {
			var x1 = figuur[1][0] * 500;
			var y1 = figuur[1][1] * 500;
			var x2 = figuur[2][0] * 500;
			var y2 = figuur[2][1] * 500;
			if (figuur[3]) {
				var R = figuur[3][0];
				var G = figuur[3][1];
				var B = figuur[3][2];
				ctx.fillStyle = 'rgb('+R*255+','+G*255+','+B*255+')'
			}
			ctx.rect(x1, y1, x2, y2);
			ctx.fill(); 
		}
	}
}

setInterval(stap, 16);
</script>
